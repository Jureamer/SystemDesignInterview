> ### CDN

CDN은 정적 콘텐츠를 전송하는데 쓰이는, 지리적으로 분산된 서버의 네트워크다. 이미지, 비디오, CSS, Javascript 파일 등을 캐시할 수 있다.

> ### CDN 사용 효과

- `웹사이트 로드 시간 개선` - 여러 최적화 방법 중 가까운 CDN 서버를 사용하여 웹사이트 방문자에 가까운 콘텐츠를 제공하므로 페이지 로드 시간이 빨라지게 됨. 로드 시간이 빨라질 수록 사용자는 오래 머물게 됨.
- `대역폭 비용 절감` - 웹사이트 호스팅용 대역폭 소비 비용은 웹사이트의 대표적 비용. CDN은 캐싱과 기타 최적화를 사용하여 원본 서버가 제공해야 하는 데이터 양을 줄이고 웹사이트 소유자의 호스팅 비용을 줄일 수 있다.
- `콘텐츠 가용성 및 이중화` - 대규모 트래픽이나 하드웨어 장애로 정상적인 웹사이트 기능이 멈출 수 있다.
  CDN은 분산되어 있기 때문에 다수의 원본 서버보다 더 많은 트래픽을 처리하고 하드웨어 장애를 견딜 수 있다.
- `웹사이트 보안 개선` - CDN은 DDoS 완화, 보안 인증 개선, 기타 최적화를 제공하여 보안을 강화할 수 있다.
  ** 동적 컨텐츠 캐시 **

> ### CDN 동작 원리

1. 최초 요청은 서버로 부터 컨텐츠를 가져와 고객에게 전송하며 동시에 CDN캐싱장비에 저장한다.
2. 두번째 이후 모든 요청은 CDN 업체에서 지정하는 해당 컨텐츠 만료 시점까지 CDN캐싱장비에 저장된 컨텐츠를 전송한다.
3. 자주사용하는 페이지에 한해서 CDN장비에서 캐싱이 되며, 해당 컨텐츠 호출이 없을 경우 주기적으로 삭제된다.
4. 서버가 파일을 찾는 데 실패하는 경우 CDN 플랫폼의 다른 서버에서 콘텐츠를 찾아 엔드유저에게 응답을 전송한다.
5. 콘텐츠를 사용할 수 없거나 콘텐츠가 오래된 경우, CDN은 서버에 대한 요청을 프록시로 작동하여 향후 요청에 대해 응답할 수 있도록 새로운 콘텐츠를 저장한다.

> ### CDN 캐싱 방식

### 1. Static Caching

– Origin Server에 있는 Content를 운영자가 미리 Cache Server에 복사
미리 복사해 두기 때문에 사용자가 Cache Server에 Content를 요청시 무조건 Cache Server에 있다.

– 대부분의 국내 CDN에서 이 방식을 사용( ex. NCSOFT 게임파일 다운로드 등)

### 2. Dynamic Caching

– Origin Server에 있는 Content를 운영자가 미리 Cache Server에 복사하지 않음

– 사용자가 Content를 요청시 해당 Content가 없는 경우 Origin Server로 부터 다운로드 받아 전달한다.
(Content가 있는 경우는 캐싱된 Content 사용자에게 전달.)
– 각각의 Content는 일정 시간이후 Cache Server에서 삭제될 수도 있다. (계속 가지고 있을 수도 있음)

> ### CDN 사용 시 고려해야 할 사항

- CDN 비용
- 적절한 만료 시한 설정
- CDN 장애에 대한 대처 방안
- 콘텐츠 무효화(invalidation) 방법

> ### 책 외 참고

- [CDN 소개 | CDN의 작동 방식](https://www.cloudflare.com/ko-kr/learning/cdn/what-is-a-cdn/)
- [CDN(Contents Delivery Network)의 정의](https://ijbgo.tistory.com/32)
- [[HTTP 기초] CDN 이란?](https://goddaehee.tistory.com/173)
